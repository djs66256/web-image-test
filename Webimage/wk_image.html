<html>
<head>
<script>
    
var imageList = []

// a empty dom
function appendImage(url) {
    let dom = document.createElement('div')
    dom.style.padding = '20px 10px'
    
    let img = document.createElement('img')
    //img.src = url
    
    let p = document.createElement('p')
    p.innerText = '0%'
    
    dom.appendChild(p)
    dom.appendChild(img);
    
    document.body.appendChild(dom)
    imageList.push({url, dom})
}

function findDomByUrl(url) {
    let obj = imageList.find(i => i.url == url)
    return obj && obj.dom
}

function updateText(url, text) {
    console.log(`update text at <${url}> with "${text}"`)
    let dom = findDomByUrl(url)
    if (dom) {
        dom.firstChild.innerText = text
    }
}

function updateProgress(url, progress) {
    updateText(url, progress)
}

function updateError(url, error) {
    updateText(url, error);
}

// set real image url
function updateImage(url, fileUrl) {
    console.log(`update image url at <${url}> with "${fileUrl}"`)
    let dom = findDomByUrl(url)
    if (dom) {
        dom.lastChild.src = fileUrl
    }
}

</script>
</head>
<body>
<!--
<img src="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1492717673480&di=31b126af31f6ff98201fec70315bfb7c&imgtype=0&src=http%3A%2F%2Fwww.yaochanglai.com%2Fd%2Ffile%2Fziranmima%2Fguaiyizhiwu%2F20170307%2Fxxj2551dswdufrdm5.jpg" />
<img src="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1492717673479&di=cf7d0d913efe52ff1888cda7b4a37278&imgtype=0&src=http%3A%2F%2Fpic74.nipic.com%2Ffile%2F20150728%2F18138004_201107753000_2.jpg" />
<img src="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1492717673479&di=d4fdce71f14b98831fa384701f4014e4&imgtype=0&src=http%3A%2F%2Fphotocdn.sohu.com%2F20131025%2FImg388904988.jpg" />
-->
</body>
</html>
